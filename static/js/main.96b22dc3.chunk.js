(this["webpackJsonpsorting-visualiser"]=this["webpackJsonpsorting-visualiser"]||[]).push([[0],{21:function(e,t,n){e.exports=n(32)},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a,r,i=n(0),s=n.n(i),c=n(17),o=n.n(c),u=n(2),l=n(6),f=n(18);!function(e){e[e.SWAP=1]="SWAP",e[e.COMPARE=2]="COMPARE",e[e.MALLOC=3]="MALLOC",e[e.MEMCPY=4]="MEMCPY",e[e.FREE=5]="FREE",e[e.NTH_BIT_SET=6]="NTH_BIT_SET"}(a||(a={})),function(e){e.FORWARD="FORWARD",e.BACKWARD="BACKWARD"}(r||(r={}));n(26);var d,h=function(e){var t=e.values,n=e.moveRef,r=e.untracker,c=Object(i.useCallback)((function(e){e.canvas.width=e.canvas.height=t.length,e.setTransform(1,0,0,-1,0,t.length),e.fillStyle="rgb(87,163,207)";var i=Object(l.a)(t);t.forEach((function(t,n){e.fillRect(n,0,1,t)}));var s;return function c(){s=requestAnimationFrame(c);for(var o=0;o<t.length;o++)i[o]!==t[o]&&(e.clearRect(o,0,1,t.length),e.fillRect(o,0,1,t[o]),i[o]=t[o]);null===r||void 0===r||r.forEachInExtra((function(t,n,a){e.save(),e.globalAlpha=.2,e.fillStyle="purple",e.fillRect(n,0,1,a),i[n]=NaN,e.restore()})),function(){var r=n.current;if(r)switch(r.type){case a.SWAP:var s=r.i,c=r.j;e.save(),e.fillStyle="cyan",e.fillRect(s.index,0,1,c.value),e.fillRect(c.index,0,1,s.value),e.restore(),i[s.index]=i[c.index]=NaN;break;case a.COMPARE:var o=r.i,u=r.j,l=r.result,f=["lime","orange","red"];e.save(),e.fillStyle=f[1+l],e.fillRect(o.index,0,1,o.value),e.fillStyle=f[1-l],e.fillRect(u.index,0,1,u.value),e.restore(),i[o.index]=i[u.index]=NaN;break;case a.MEMCPY:var d=r.from,h=r.to,v=r.value;e.save(),e.fillStyle="gold",e.fillRect(d.index,0,1,v),e.fillRect(h.index,0,1,v),e.restore(),i[d.index]=i[h.index]=NaN;break;case a.NTH_BIT_SET:var b=r.index.index,m=r.result;e.save(),e.fillStyle="black",e.fillRect(b+.1,m?Math.floor(t.length/2):0,.8,Math.floor(t.length/2)),e.restore(),i[b]=NaN}}()}(),function(){cancelAnimationFrame(s)}}),[t,n,r]),o=Object(f.a)(c);return s.a.createElement("canvas",{className:"Display",ref:o})},v=n(1),b=n(8),m=n(3),p=(n(27),function(e){var t=e.name,n=e.handler,a=e.disabled,r=e.keyStr,c=e.keyCode,o=e.children,u=e.className,l=Object(b.a)(e,["name","handler","disabled","keyStr","keyCode","children","className"]),f=t.replace(/^(.)/,(function(e,t){return t.toLowerCase()})).replace(/ (.)/g,(function(e,t){return t.toUpperCase()})),d=Object(i.useRef)(null);return Object(i.useEffect)((function(){if(void 0!==r||void 0!==c){var e=function(e){var t;e.key!==r&&e.keyCode!==c||(null===(t=d.current)||void 0===t||t.click()," "===e.key&&e.preventDefault())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}}),[d,r,c]),s.a.createElement("button",Object.assign({ref:d,className:"Button ".concat(u," ").concat(f),title:t,onClick:n,disabled:a},l),o)}),O=function(e){var t=e.Icon,n=Object(b.a)(e,["Icon"]);return s.a.createElement(p,Object.assign({},n,{className:"".concat(n.className," Icon")}),s.a.createElement(t,{className:"icon"}))},E=p,j=(n(28),function(e){var t=e.reverse,n=t.status,a=Object(b.a)(t,["status"]),r=e.restart,c=e.speedDown,o=e.stepBack,u=e.play,l=u.status,f=Object(b.a)(u,["status"]),d=e.stepForward,h=e.speedUp,p=e.stats,j=e.sizeUp,g=e.sizeDown,k=e.unsort,y=e.sort,S=Object(i.useState)(!1),R=Object(v.a)(S,2),C=R[0],M=R[1],A=Object(i.useState)(!1),x=Object(v.a)(A,2),w=x[0],N=x[1];return s.a.createElement("div",{className:"Menu"},s.a.createElement(O,Object.assign({name:"restart",Icon:m.i,style:C?{transition:"transform 300ms",transform:"rotate(".concat(360,"deg)")}:{},onTransitionEnd:function(){return M(!1)}},r,{handler:function(){r.handler(),M(!0)}})),s.a.createElement(O,Object.assign({name:"speed down",Icon:m.a},c)),s.a.createElement(O,Object.assign({name:"step back",Icon:m.j},o)),s.a.createElement("div",{className:"playPauseWithReverse"},s.a.createElement(O,Object.assign({name:"play",Icon:l?m.f:m.g,style:{transition:"transform 100ms",transform:"rotate(".concat(n?180:0,"deg)")}},f)),s.a.createElement(O,Object.assign({name:"reverse",Icon:m.l},a))),s.a.createElement(O,Object.assign({name:"step forward",Icon:m.k},d)),s.a.createElement(O,Object.assign({name:"speed up",Icon:m.c},h)),s.a.createElement("div",{className:"extra ".concat(w?"show":"hide")},s.a.createElement(O,{name:"extra options",Icon:m.b,keyCode:27,handler:function(){return N(!w)}}),s.a.createElement("div",{className:"buttons"},s.a.createElement("div",{className:"algorithms"},s.a.createElement("div",{className:"unsort"},k.list.map((function(e){return s.a.createElement(E,{key:e,handler:function(){k.handler(e)},name:e,disabled:k.disabled},e.replace(/([A-Z])/g,(function(e,t){return" ".concat(t)})).replace(/^(.)/,(function(e,t){return t.toUpperCase()})))}))),s.a.createElement("div",{className:"sort"},y.list.map((function(e){return s.a.createElement(E,{key:e,handler:function(){N(!1),y.handler(e)},name:e,className:y.current===e?"active":""},e.replace(/([A-Z])/g,(function(e,t){return" ".concat(t)})).replace(/^(.)/,(function(e,t){return t.toUpperCase()})))})))),s.a.createElement(O,Object.assign({name:"show stats",Icon:m.d},p)),s.a.createElement(O,Object.assign({name:"size up",Icon:m.h},j)),s.a.createElement(O,Object.assign({name:"size down",Icon:m.e},g)))))}),g=function(e){return Object(i.useMemo)((function(){for(var t=[],n=1;n<=e;n++)t.push(n);return t}),[e])},k=n(4),y=n.n(k),S=n(11),R=n(7),C=n(20),M=n(13),A=n(14),x=n(15),w=n(19),N=function(){function e(){Object(x.a)(this,e),this.comparisons=0,this.reads=0,this.writes=0}return Object(w.a)(e,[{key:"modifyBy",value:function(e,t){switch(e.type){case a.COMPARE:this.reads+=2*t,this.comparisons+=1*t;break;case a.SWAP:this.reads+=2*t,this.writes+=2*t;break;case a.MALLOC:break;case a.MEMCPY:this.reads+=1*t,this.writes+=1*t;break;case a.FREE:break;case a.NTH_BIT_SET:this.reads+=1*t}}},{key:"add",value:function(e){this.modifyBy(e,1)}},{key:"subtract",value:function(e){this.modifyBy(e,-1)}}]),e}(),I=function(e,t){var n=26*t,r=new DataView(e);switch(r.getUint8(n)){case a.COMPARE:return{type:a.COMPARE,i:{buffer:r.getUint32(n+1),index:r.getUint32(n+5),value:r.getUint32(n+9)},j:{buffer:r.getUint32(n+13),index:r.getUint32(n+17),value:r.getUint32(n+21)},result:r.getInt8(n+25)};case a.SWAP:return{type:a.SWAP,i:{buffer:r.getUint32(n+1),index:r.getUint32(n+5),value:r.getUint32(n+9)},j:{buffer:r.getUint32(n+13),index:r.getUint32(n+17),value:r.getUint32(n+21)}};case a.MALLOC:return{type:a.MALLOC,buffer:r.getUint32(n+1),size:r.getUint32(n+5)};case a.MEMCPY:return{type:a.MEMCPY,from:{buffer:r.getUint32(n+1),index:r.getUint32(n+5)},to:{buffer:r.getUint32(n+9),index:r.getUint32(n+13)},value:r.getUint32(n+17),original:r.getUint32(n+21)};case a.FREE:return{type:a.FREE,buffer:r.getUint32(n+1)};case a.NTH_BIT_SET:return{type:a.NTH_BIT_SET,index:{buffer:r.getUint32(n+1),index:r.getUint32(n+5)},result:0!==r.getUint8(n+9)}}},U=function(){function e(t,n,a){Object(M.a)(this,e),this.original=void 0,this.buffers=void 0,this.bufferIds=void 0,this.moves=void 0,this.numMoves=void 0,this.currentMove=void 0,this.statistics=void 0,this.moves=t,this.numMoves=n,this.buffers={0:a},this.bufferIds=new Set,this.original=Object(R.a)(a),this.currentMove=0,this.statistics=new N,this.hasNext=this.hasNext.bind(this),this.hasPrevious=this.hasPrevious.bind(this),this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.reset=this.reset.bind(this)}return Object(A.a)(e,[{key:"hasNext",value:function(){return this.currentMove<this.numMoves}},{key:"hasPrevious",value:function(){return this.currentMove>0}},{key:"next",value:function(){if(this.hasNext()){var e=I(this.moves,this.currentMove++);switch(this.statistics.add(e),e.type){case a.SWAP:var t=e.i,n=e.j;this.buffers[t.buffer][t.index]=n.value,this.buffers[n.buffer][n.index]=t.value;break;case a.MALLOC:var r=e.buffer;this.bufferIds.add(r),this.buffers[r]=[];break;case a.MEMCPY:var i=e.from,s=e.to,c=this.buffers[i.buffer][i.index];this.buffers[s.buffer][s.index]=c;break;case a.FREE:var o=e.buffer;this.bufferIds.delete(o)}return e}}},{key:"previous",value:function(){if(this.hasPrevious()){var e=I(this.moves,--this.currentMove);switch(this.statistics.subtract(e),e.type){case a.SWAP:var t=e.i,n=e.j;this.buffers[t.buffer][t.index]=t.value,this.buffers[n.buffer][n.index]=n.value;break;case a.MALLOC:var r=e.buffer;this.bufferIds.delete(r);break;case a.MEMCPY:var i=e.to,s=i.buffer,c=i.index,o=e.original;this.buffers[s][c]=o;break;case a.FREE:var u=e.buffer;this.bufferIds.add(u)}return e}}},{key:"reset",value:function(){var e=this;this.bufferIds.forEach((function(t){delete e.buffers[t]}));for(var t=0;t<this.original.length;t++)this.buffers[0][t]=this.original[t];this.currentMove=0}},{key:"step",value:function(e){return e===r.FORWARD?this.next():this.previous()}},{key:"hasStep",value:function(e){return e===r.FORWARD?this.hasNext():this.hasPrevious()}},{key:"animateStepsPerFrame",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.onCompletion,i=a.moveRef,s=function(e){for(var a=0;a<e;a++)n.step(t)},c=i?function(){s(e-1),i.current=n.step(t)}:function(){return s(e)},o=function(){var e;return function a(){c(),n.hasStep(t)?e=requestAnimationFrame(a):r&&r()}(),function(){cancelAnimationFrame(e)}},u=function(){var a=setInterval((function(){c(),n.hasStep(t)||(clearInterval(a),r&&r())}),1/(.06*e));return function(){clearInterval(a)}};return e>=1?o():u()}},{key:"animateUntilCompletion",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t===r.FORWARD?this.numMoves-this.currentMove:this.currentMove,i=a/(.06*e);return this.animateStepsPerFrame(i,t,n)}},{key:"forEachInExtra",value:function(e){var t=this;this.bufferIds.forEach((function(n){t.buffers[n].forEach((function(t,a){return e(n,a,t)}))}))}}]),e}(),P=Object(S.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(3).then(n.bind(null,33));case 2:t=e.sent.default,a=new t,d=C.a(a);case 5:case"end":return e.stop()}}),e)})))(),W=function(){var e=Object(S.a)(y.a.mark((function e(t,n,a,r){var i,s,c,o,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P;case 2:return console.log("Main Thread: Deploying ".concat(t,": ").concat(n)),e.next=5,d(t,n,a);case 5:return i=e.sent,s=Object(u.a)(i,3),c=s[0],o=s[1],l=s[2],console.log("Main Thread: Received ".concat(t," data: ").concat(n)),e.abrupt("return",[new U(c,o,r),l]);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),D=function(e){var t=Object(i.useState)(Object(R.a)(e)),n=Object(u.a)(t,2),a=n[0],s=n[1];Object(i.useEffect)((function(){return s(Object(R.a)(e))}),[e]);var c=Object(i.useCallback)(function(){var t=Object(S.a)(y.a.mark((function t(n,a,i){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("nothing"!==n){t.next=3;break}return s(Object(R.a)(e)),t.abrupt("return");case 3:return a&&i&&a(),t.abrupt("return",W("unsort",n,e,e).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];s(a),n.animateUntilCompletion(500,r.FORWARD,{onCompletion:function(){i&&i()}})})));case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),[e]),o=Object(i.useState)("heapSort"),l=Object(u.a)(o,2),f=l[0],d=l[1],h=Object(i.useState)(),v=Object(u.a)(h,2),b=v[0],m=v[1];return Object(i.useEffect)((function(){var t=!1;return W("sort",f,a,e).then((function(e){var n=Object(u.a)(e,1)[0];return!t&&m(n)})).catch(console.error),function(){t=!0}}),[f,a,e]),{unsortWith:c,sort:b,setSort:Object(i.useCallback)((function(e){d(e)}),[]),sortString:f}};var F=function(e,t){var n=Object(i.useState)(!0),a=Object(v.a)(n,2),r=a[0],s=a[1],c=Object(i.useCallback)((function(n){s(n===e||n!==t&&function(e){return!e})}),[e,t]);return[r?e:t,c]},T=function(){var e=Object(i.useState)(0),t=Object(v.a)(e,2),n=t[0],a=t[1],r=n>0,s=Object(i.useCallback)((function(){a((function(e){return e+1}))}),[]),c=Object(i.useCallback)((function(){a((function(e){return Math.max(0,e-1)}))}),[]);return Object(i.useMemo)((function(){return{blocking:r,block:s,unblock:c}}),[r,s,c])},B=["binaryInsertionSort","bubbleSort","heapSort","mergeSort","quickSort","radixSortLsb","radixSortMsb","shellSort","timsort"],L=["cut","hinduShuffle","overhandShuffle","perfectRiffleShuffle","randomise","reverse","riffleShuffle"],_=(n(30),n(31),function(e){var t=e.stats,n=void 0===t?{comparisons:0,reads:0,writes:0}:t,a=e.display,r=Object(i.useState)(n.comparisons),c=Object(v.a)(r,2),o=c[0],u=c[1],l=Object(i.useState)(n.reads),f=Object(v.a)(l,2),d=f[0],h=f[1],b=Object(i.useState)(n.writes),m=Object(v.a)(b,2),p=m[0],O=m[1];return Object(i.useEffect)((function(){var e=setInterval((function(){u(n.comparisons),h(n.reads),O(n.writes)}),50);return function(){return clearInterval(e)}}),[n]),s.a.createElement("div",{className:"Stats ".concat(a?"show":"hide")},s.a.createElement("div",{className:"stat comparisons"},"Comparisons: ",o),s.a.createElement("div",{className:"stat reads"},"Reads: ",d),s.a.createElement("div",{className:"stat writes"},"Writes: ",p))}),K=function(){var e=F(r.FORWARD,r.BACKWARD),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),o=Object(u.a)(c,2),l=o[0],f=o[1],d=Object(i.useState)(!1),v=Object(u.a)(d,2),b=v[0],m=v[1],p=T(),O=p.blocking,E=p.block,k=p.unblock,y=Object(i.useState)(-4),S=Object(u.a)(y,2),R=S[0],C=S[1],M=Object(i.useState)(12),A=Object(u.a)(M,2),x=A[0],w=A[1],N=g(Math.floor(Math.pow(1.5,x))),I=D(N),U=I.unsortWith,P=I.sort,W=I.setSort,K=I.sortString,Y=Object(i.useRef)();return Object(i.useEffect)((function(){Y.current=void 0}),[Y,O]),Object(i.useEffect)((function(){if(l)return null===P||void 0===P?void 0:P.animateStepsPerFrame(Math.pow(1.3,R),n,{onCompletion:function(){f(!1),a(),Y.current=void 0},moveRef:Y})}),[l,P,R,n,a,Y]),Object(i.useEffect)((function(){var e,t=null,n=!1;l&&(null===(e=navigator.wakeLock)||void 0===e||e.request("screen").then((function(e){n?e.release():(t=e,console.log("obtained screen lock."))})));return function(){n=!0,t&&(t.release(),console.log("released screen lock."))}}),[l]),s.a.createElement("div",{className:"App"},s.a.createElement(j,{restart:{disabled:O||!P,keyStr:"r",handler:function(){a(r.FORWARD),f(!1),E(),null===P||void 0===P||P.animateUntilCompletion(1e3,r.BACKWARD,{onCompletion:function(){return k()}})}},speedDown:{disabled:O||!P,keyCode:l?37:void 0,handler:function(){return C(Math.max(-10,R-1))}},stepBack:{disabled:O||!P,keyCode:l?void 0:37,handler:function(){Y.current=null===P||void 0===P?void 0:P.step(r.BACKWARD)}},play:{disabled:O||!P,handler:function(){return f(!l)},keyStr:" ",status:l},reverse:{disabled:O||!P,keyStr:"`",handler:function(){var e=n===r.BACKWARD?r.FORWARD:r.BACKWARD;(null===P||void 0===P?void 0:P.hasStep(e))&&a()},status:n===r.BACKWARD},stepForward:{disabled:O||!P,keyCode:l?void 0:39,handler:function(){Y.current=null===P||void 0===P?void 0:P.step(r.FORWARD)}},speedUp:{disabled:O||!P,keyCode:l?39:void 0,handler:function(){return C(Math.min(10,R+1))}},stats:{keyStr:"s",handler:function(){return m((function(e){return!e}))}},sizeUp:{keyCode:38,handler:function(){return w(Math.min(20,x+1))}},sizeDown:{keyCode:40,handler:function(){return w(Math.max(3,x-1))}},unsort:{disabled:O,list:L,handler:function(e){L.includes(e)&&(f(!1),a(r.FORWARD),U(e,E,k))}},sort:{current:K,list:B,handler:function(e){e!==K&&(Y.current=void 0,U("nothing").then((function(){return W(e)})))}}}),s.a.createElement(_,{stats:null===P||void 0===P?void 0:P.statistics,display:b}),s.a.createElement(h,{values:N,moveRef:Y,untracker:P}))};o.a.render(s.a.createElement(K,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.96b22dc3.chunk.js.map