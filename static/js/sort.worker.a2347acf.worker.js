!function(e){var r={};function n(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)n.d(t,i,function(r){return e[r]}.bind(null,i));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="/sorting-visualiser/",n(n.s=0)}([function(e,r,n){"use strict";function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function i(e,r){if(e){if("string"===typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],t=!0,i=!1,o=void 0;try{for(var a,f=e[Symbol.iterator]();!(t=(a=f.next()).done)&&(n.push(a.value),!r||n.length!==r);t=!0);}catch(u){i=!0,o=u}finally{try{t||null==f.return||f.return()}finally{if(i)throw o}}return n}}(e,r)||i(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function f(e,r){return(f=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,r,n){return(s=u()?Reflect.construct:function(e,r,n){var t=[null];t.push.apply(t,r);var i=new(Function.bind.apply(e,t));return n&&f(i,n.prototype),i}).apply(null,arguments)}function c(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(r);var l=Symbol("Comlink.proxy"),v=Symbol("Comlink.endpoint"),h=Symbol("Comlink.releaseProxy"),d=Symbol("Comlink.thrown"),p=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},b=new Map([["proxy",{canHandle:function(e){return p(e)&&e[l]},serialize:function(e){var r=new MessageChannel,n=r.port1,t=r.port2;return m(e,n),[t,[t]]},deserialize:function(e){return e.start(),function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,a=new Proxy(t,{get:function(t,o){if(g(i),o===h)return function(){return P(r,{type:5,path:n.map((function(e){return e.toString()}))}).then((function(){y(r),i=!0}))};if("then"===o){if(0===n.length)return{then:function(){return a}};var f=P(r,{type:0,path:n.map((function(e){return e.toString()}))}).then(j);return f.then.bind(f)}return e(r,[].concat(c(n),[o]))},set:function(e,t,a){g(i);var f=o(O(a),2),u=f[0],s=f[1];return P(r,{type:1,path:[].concat(c(n),[t]).map((function(e){return e.toString()})),value:u},s).then(j)},apply:function(t,a,f){g(i);var u=n[n.length-1];if(u===v)return P(r,{type:4}).then(j);if("bind"===u)return e(r,n.slice(0,-1));var s=o(x(f),2),c=s[0],l=s[1];return P(r,{type:2,path:n.map((function(e){return e.toString()})),argumentList:c},l).then(j)},construct:function(e,t){g(i);var a=o(x(t),2),f=a[0],u=a[1];return P(r,{type:3,path:n.map((function(e){return e.toString()})),argumentList:f},u).then(j)}});return a}(e,[],r);var r}}],["throw",{canHandle:function(e){return p(e)&&d in e},serialize:function(e){var r=e.value;return[r instanceof Error?{isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:{isError:!1,value:r},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function m(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;r.addEventListener("message",(function n(t){if(t&&t.data){var i,f=Object.assign({path:[]},t.data),u=f.id,l=f.type,v=f.path,h=(t.data.argumentList||[]).map(j);try{var p=v.slice(0,-1).reduce((function(e,r){return e[r]}),e),b=v.reduce((function(e,r){return e[r]}),e);switch(l){case 0:i=b;break;case 1:p[v.slice(-1)[0]]=j(t.data.value),i=!0;break;case 2:i=b.apply(p,h);break;case 3:var g;i=S(s(b,c(h)));break;case 4:var x=new MessageChannel,w=x.port1,P=x.port2;m(e,P),i=M(w,[w]);break;case 5:i=void 0}}catch(g){i=a({value:g},d,0)}Promise.resolve(i).catch((function(e){return a({value:e},d,0)})).then((function(e){var t=o(O(e),2),i=t[0],a=t[1];r.postMessage(Object.assign(Object.assign({},i),{id:u}),a),5===l&&(r.removeEventListener("message",n),y(r))}))}})),r.start&&r.start()}function y(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function g(e){if(e)throw new Error("Proxy has been released and is not useable")}function x(e){var r,n=e.map(O);return[n.map((function(e){return e[0]})),(r=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],r))]}var w=new WeakMap;function M(e,r){return w.set(e,r),e}function S(e){return Object.assign(e,a({},l,!0))}function O(e){var r,n=function(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var t,o,a=!0,f=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){f=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(f)throw o}}}}(b);try{for(n.s();!(r=n.n()).done;){var t=o(r.value,2),a=t[0],f=t[1];if(f.canHandle(e)){var u=o(f.serialize(e),2);return[{type:3,name:a,value:u[0]},u[1]]}}}catch(s){n.e(s)}finally{n.f()}return[{type:0,value:e},w.get(e)||[]]}function j(e){switch(e.type){case 3:return b.get(e.name).deserialize(e.value);case 0:return e.value}}function P(e,r,n){return new Promise((function(t){var i=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function r(n){n.data&&n.data.id&&n.data.id===i&&(e.removeEventListener("message",r),t(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:i},r),n)}))}var E=function(e){var r=e.compare,n=e.swap,t=e.size,i=Math.floor(3*Math.log2(t)/4),o=function(e,n,t){for(;e<n;){var i=e+(n-e>>1);r(i,t)<0?e=i+1:n=i}return e},a=function(e,t,i){for(;;){var o=2*t+1,a=2*t+2,f=t;if(o<i&&r(e+f,e+o)<0&&(f=o),a<i&&r(e+f,e+a)<0&&(f=a),f===t)return;n(e+t,e+f),t=f}};!function e(t,f,u){if(f-t<16)!function(e,r){for(var t=1;t<r-e;t++)for(var i=o(e,e+t,e+t),a=e+t;a>i;a--)n(a,a-1)}(t,f);else if(u>i)!function(e,r){for(var t=r-e,i=t-1;i>=0;i--)a(e,i,t);for(;t>1;)n(e,e+t-1),a(e,0,t-1),t-=1}(t,f);else{var s=function(e,n){var t=Array(3).fill(0).map((function(){return e+Math.floor(Math.random()*(n-e))}));return t.sort((function(e,n){return r(e,n)})),t[1]}(t,f);n(s,t);for(var c=t+1,l=f-1;c<l;){for(;c<l&&r(c,t)<=0;)c+=1;for(;c<l&&r(t,l)<0;)l-=1;n(c,l)}r(t,c)<0&&(c-=1),n(t,c),e(t,c+1,u+1),e(c+1,f,u+1)}}(0,t,1)};function k(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var A,U,z=function e(){k(this,e),this.pending=[],this.minGallop=7},I={binaryInsertionSort:function(e){for(var r=e.compare,n=e.swap,t=e.size,i=function(e){for(var n=0,t=e;n<t;){var i=n+Math.floor((t-n)/2);r(e,i)<0?t=i:n=i+1}return n},o=1;o<t;o++)for(var a=i(o),f=o;f>a;f--)n(f,f-1)},bubbleSort:function(e){for(var r=e.swap,n=e.compare,t=e.size,i=0;i<t-1;i++)for(var o=t-1;o>i;o--)n(o,o-1)<0&&r(o,o-1)},heapSort:function(e){for(var r=e.compare,n=e.swap,t=e.size,i=function(e,t){for(var i,o,a;e<t;){if(i=e,a=2*e+2,(o=2*e+1)<t&&r(i,o)<0&&(i=o),a<t&&r(i,a)<0&&(i=a),i===e)return;n(e,i),e=i}},o=0;o<t;o++)i(t-o-1,t);for(var a=0;a<t;a++)n(0,t-a-1),i(0,t-a-1)},introsort:E,mergeSort:function(e){var r=e.compare,n=e.malloc,t=e.memcpy,i=e.free,o=e.size;!function e(o,a){var f=o+Math.floor((a-o)/2);o<f&&(e(o,f),e(f,a),function(e,o,a){for(var f=n(a-e),u=0,s=e,c=o;s<o&&c<a;)r(s,c)<0?t(s++,{buffer:f,index:u}):t(c++,{buffer:f,index:u}),u+=1;if(s<o)for(var l=s;l<o;l++)t(l,a-o+l);for(;u--;)t({buffer:f,index:u},e+u);i(f)}(o,f,a))}(0,o)},quickSort:function(e){var r=e.swap,n=e.compare,t=e.size;!function e(t,i){if(t<i){var o=function(e,t){for(var i=e,o=t,a=t;a>i;a--)n(i,a)<0&&r(a,o--);return r(i,o),o}(t,i);e(t,o-1),e(o+1,i)}}(0,t-1)},radixSortLsb:function(e){for(var r=e.nthBitSet,n=e.malloc,t=e.memcpy,i=e.free,o=e.size,a=0;1<<a<=o;a++){for(var f=n(o),u=0,s=o-1,c=0;c<o;c++)r(c,a)?t(c,{buffer:f,index:s--}):t(c,{buffer:f,index:u++});for(var l=0;l<u;l++)t({buffer:f,index:l},l);for(var v=0;v<o-s-1;v++)t({buffer:f,index:o-v-1},u+v);i(f)}},radixSortMsb:function(e){for(var r=e.nthBitSet,n=e.swap,t=e.size,i=[0],o=[t],a=[Math.floor(Math.log2(t))];i.length>0;){for(var f=i.pop(),u=o.pop(),s=a.pop(),c=f,l=u;c<l;){for(;c<l&&!r(c,s);)c+=1;for(;c<l&&r(l-1,s);)l-=1;c<l&&n(c,l-1)}f+1<c&&s>0&&(i.push(f),o.push(c),a.push(s-1)),c+1<u&&s>0&&(i.push(c),o.push(u),a.push(s-1))}},shellSort:function(e){for(var r=e.compare,n=e.swap,t=e.size,i=~~(t/2);i>0;){for(var o=i;o<t;o++)for(var a=o;a>=i&&r(a-i,a)>0;a-=i)n(a-i,a);i=~~(i/2)}},timsort:function(e){for(var r=e.compare,n=e.swap,t=e.malloc,i=e.memcpy,o=e.free,a=e.size,f=function(e,n){if(e===n-1)return 1;var t=e+1;if(r(e,t)>0){for(;t<n&&r(t-1,t)>0;)t++;return e-t}for(;t<n&&r(t-1,t)<=0;)t++;return t-e},u=function(e,n,t,i,o){var a=o?function(e){return{buffer:o,index:e}}:function(e){return e},f=n+i,u=0,s=1;if(r(a(f),e)<0){for(var c=t-i;s<c&&r(a(f+s),e)<0;)u=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c),u=i+u,s=i+s}else{for(var l=i;s<l&&r(a(f-s),e)>=0;)u=s,(s=1+(s<<1))<=0&&(s=l);s>l&&(s=l);var v=u;u=i-s,s=i-v}for(;u<s;){var h=u+(s-u>>1);r(a(n+h),e)<0?u=h+1:s=h}return s},s=function(e,n,t,i,o){var a=o?function(e){return{buffer:o,index:e}}:function(e){return e},f=n+i,u=0,s=1;if(r(a(f),e)<0){for(var c=t-i;s<c&&r(a(f+s),e)<0;)u=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c),u+=i,s+=i}else{for(var l=i;s<l&&r(a(f-s),e)>=0;)u=s,(s=1+(s<<1))<=0&&(s=l);s>l&&(s=l);var v=u;u=i-s,s=i-v}for(;u<s;){var h=u+(s-u>>1);r(a(n+h),e)<0?u=h+1:s=h}return s},c=function(e,n,t){for(;e<n;){var i=e+Math.floor((n-e)/2);r(t,i)<0?n=i:e=i+1}return e},l=function(e,r){for(var t=r;t>e;t--)n(t-1,t)},v=function(e,r){for(var n=e;n<r;n++)l(c(e,n,n),n)},h=function(e,r){for(var t=Math.floor((r-e)/2),i=0;i<t;i++)n(e+i,r-i-1)},d=function(e,n,a,f,c){for(var l=t(a),v=0;v<a;v++)i(n+v,{buffer:l,index:v});var h=n;n=0;for(var d=0,p=0,b=function(){for(;a>0&&c>0&&(d>=e.minGallop||p>=e.minGallop);){e.minGallop&&(e.minGallop-=1),d=s(f,n,a,0,l);for(var r=0;r<d;r++)i({buffer:l,index:n++},h++);a-=d,p=u({buffer:l,index:n},f,c,0);for(var t=0;t<p;t++)i(f++,h++);c-=p}e.minGallop+=1};a>0&&c>0;)r({buffer:l,index:n},f)<0?(i({buffer:l,index:n++},h++),a-=1,d+=1,p=0):(i(f++,h++),c-=1,d=0,p+=1),d+p>=e.minGallop&&b();for(;a-- >0;)i({buffer:l,index:n++},h++);o(l)},p=function(e,n,a,f,c){for(var l=t(c),v=0;v<c;v++)i(f+v,{buffer:l,index:v});for(var h=f+c,d=0,p=0,b=function(){for(;a>0&&c>0&&(d>=e.minGallop||p>=e.minGallop);){e.minGallop&&(e.minGallop-=1),d=a-s({buffer:l,index:c-1},n,a,a-1);for(var r=0;r<d;r++)i(n+--a,--h);p=c-u(n+a-1,0,c,c-1,l);for(var t=0;t<p;t++)i({buffer:l,index:--c},--h)}e.minGallop+=1};a>0&&c>0;)r({buffer:l,index:c-1},n+a-1)<=0?(i(n+--a,--h),d+=1,p=0):(i({buffer:l,index:--c},--h),d=0,p+=1),d+p>=e.minGallop&&b();for(;c>0;)i({buffer:l,index:--c},--h);o(l)},b=function(e,r){var n=e.pending,t=n[r].base,i=n[r].len,o=n[r+1].base,a=n[r+1].len;n[r].len=i+a,n.splice(r+1,1);var f=s(o,t,i,0);((i-=f)<=(a=u((t+=f)+i-1,o,a,a-1))?d:p)(e,t,i,o,a)},m=function(e){for(var r=e.pending;r.length>1;){var n=r.length-2;if(n>0&&r[n-1].len<=r[n].len+r[n+1].len)r[n-1].len<r[n+1].len&&(n-=1),b(e,n);else{if(!(r[n].len<=r[n+1].len))break;b(e,n)}}},y=new z,g=a,x=0,w=function(e){for(var r=0;e>=16;)r|=1&e,e>>=1;return e+r}(a);g>0;){var M=f(x,a);M<0&&h(x,x+(M*=-1)),M<w&&v(x,x+(M=Math.min(w,g))),y.pending.push({base:x,len:M}),m(y),x+=M,g-=M}!function(e){for(var r=e.pending;r.length>1;){var n=r.length-2;n>0&&r[n-1].len<r[n+1].len&&(n-=1),b(e,n)}}(y)}},_=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,t=0;0===n;)n=Math.random();for(;0===t;)t=Math.random();var i=Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*t);return i*r+e},C=function(e,r,n){return Math.max(e,Math.min(n,Math.round(r)))},R={cut:function(e){for(var r=e.malloc,n=e.memcpy,t=e.free,i=e.size,o=C(0,_(i/2,i/6),i),a=r(o),f=0;f<o;f++)n(f,{buffer:a,index:f});for(var u=0;u<i-o;u++)n(o+u,u);for(var s=0;s<o;s++)n({buffer:a,index:s},i-o+s);t(a)},hinduShuffle:function(e){for(var r=e.malloc,n=e.memcpy,t=e.free,i=e.size,o=C(0,_(i/5,i/30),i-1),a=C(0,_((i-o)/2,(i-o)/6),i-o),f=r(o),u=0;u<o;u++)n(a+u,{buffer:f,index:u});for(var s=0;s<a;s++)n(a-s-1,a+o-s-1);for(var c=0;c<o;c++)n({buffer:f,index:c},c);t(f)},overhandShuffle:function(e){for(var r=e.malloc,n=e.memcpy,t=e.free,i=e.size,o=0;o<i;){for(var a=Math.min(i-o,C(0,_(i/7,i/20),i)),f=r(a),u=0;u<a;u++)n(i-a+u,{buffer:f,index:u});for(var s=0;s<i-o-a;s++)n(i-a-s-1,i-s-1);for(var c=0;c<a;c++)n({buffer:f,index:c},o+c);t(f),o+=a}},perfectRiffleShuffle:function(e){for(var r=e.malloc,n=e.memcpy,t=e.free,i=e.size,o=i>>1,a=r(o),f=0;f<o;f++)n(f,{buffer:a,index:f});for(var u=0,s=o,c=0;u<o&&s<i;)n({buffer:a,index:u++},c++),n(s++,c++);t(a)},randomise:function(e){for(var r=e.swap,n=e.size-1;n>0;n--){r(n,Math.floor(Math.random()*(n+1)))}},reverse:function(e){for(var r=e.swap,n=e.size,t=0;t<Math.floor(n/2);t++)r(t,n-t-1)},riffleShuffle:function(e){for(var r=e.malloc,n=e.memcpy,t=e.free,i=e.size,o=C(0,_(i/2,i/10),i),a=r(o),f=0;f<o;f++)n(f,{buffer:a,index:f});for(var u=0,s=o,c=0;u<o&&s<i;)Math.random()>.5?n({buffer:a,index:u++},c++):n(s++,c++);for(;u<o;)n({buffer:a,index:u++},c++);t(a)}};function L(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function T(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?L(Object(n),!0).forEach((function(r){a(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function B(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function G(e,r,n){return r&&B(e.prototype,r),n&&B(e,n),e}!function(e){e[e.SWAP=1]="SWAP",e[e.COMPARE=2]="COMPARE",e[e.MALLOC=3]="MALLOC",e[e.MEMCPY=4]="MEMCPY",e[e.FREE=5]="FREE",e[e.NTH_BIT_SET=6]="NTH_BIT_SET"}(A||(A={})),function(e){e.FORWARD="FORWARD",e.BACKWARD="BACKWARD"}(U||(U={}));var D,W=function(){function e(){k(this,e),this.buffer=void 0,this.size=void 0,this.size=0,this.buffer=new ArrayBuffer(6656)}return G(e,[{key:"growIfNeeded",value:function(){if(!(26*(this.size+1)<=this.buffer.byteLength)){for(var e=new ArrayBuffer(2*this.buffer.byteLength),r=new DataView(this.buffer),n=new DataView(e),t=0;t<this.buffer.byteLength;t++)n.setUint8(t,r.getUint8(t));this.buffer=e}}},{key:"addMove",value:function(e){this.growIfNeeded(),function(e,r,n){var t=26*n,i=new DataView(r);switch(i.setUint8(t,e.type),e.type){case A.COMPARE:i.setUint32(t+1,e.i.buffer),i.setUint32(t+5,e.i.index),i.setUint32(t+9,e.i.value),i.setUint32(t+13,e.j.buffer),i.setUint32(t+17,e.j.index),i.setUint32(t+21,e.j.value),i.setInt8(t+25,e.result);break;case A.SWAP:i.setUint32(t+1,e.i.buffer),i.setUint32(t+5,e.i.index),i.setUint32(t+9,e.i.value),i.setUint32(t+13,e.j.buffer),i.setUint32(t+17,e.j.index),i.setUint32(t+21,e.j.value);break;case A.MALLOC:i.setUint32(t+1,e.buffer),i.setUint32(t+5,e.size);break;case A.MEMCPY:i.setUint32(t+1,e.from.buffer),i.setUint32(t+5,e.from.index),i.setUint32(t+9,e.to.buffer),i.setUint32(t+13,e.to.index),i.setUint32(t+17,e.value),i.setUint32(t+21,e.original);break;case A.FREE:i.setUint32(t+1,e.buffer);break;case A.NTH_BIT_SET:i.setUint32(t+1,e.index.buffer),i.setUint32(t+5,e.index.index),i.setUint8(t+9,e.result?1:0)}}(e,this.buffer,this.size),this.size+=1}},{key:"length",get:function(){return this.size}}]),e}();D=Symbol.iterator;var F=function(){function e(){k(this,e),this._next=1,this._inUse=new Set([])}return G(e,[{key:"next",value:function(){var e=this._next++;return this._inUse.add(e),e}},{key:"free",value:function(e){this._inUse.delete(e)}},{key:"inUse",value:function(e){return this._inUse.has(e)}},{key:D,value:function(){return this._inUse[Symbol.iterator]()}}]),e}(),N=function(){function e(r){k(this,e),this.original=void 0,this.buffers=void 0,this.bufferIdPool=void 0,this.moves=void 0,this.size=void 0,this.original=c(r),this.buffers={0:r},this.bufferIdPool=new F,this.size=r.length,this.moves=new W,this.swap=this.swap.bind(this),this.compare=this.compare.bind(this),this.malloc=this.malloc.bind(this),this.memcpy=this.memcpy.bind(this),this.free=this.free.bind(this),this.nthBitSet=this.nthBitSet.bind(this)}return G(e,[{key:"getMoves",value:function(){return[this.moves.buffer,this.moves.length]}},{key:"swap",value:function(e,r){var n=this.normaliseIndex(e),t=this.normaliseIndex(r),i=this.buffers[n.buffer],o=this.buffers[t.buffer];i[n.index]=t.value,o[t.index]=n.value,this.moves.addMove({type:A.SWAP,i:n,j:t})}},{key:"compare",value:function(e,r){var n=this.normaliseIndex(e),t=this.normaliseIndex(r),i=Math.sign(n.value-t.value);return this.moves.addMove({type:A.COMPARE,i:n,j:t,result:i}),i}},{key:"malloc",value:function(e){var r=this.bufferIdPool.next();return this.buffers[r]=new Array(e),this.moves.addMove({type:A.MALLOC,size:e,buffer:r}),r}},{key:"memcpy",value:function(e,r){e=this.normaliseIndex(e),r=this.normaliseIndex(r);var n=this.buffers[e.buffer][e.index],t=this.buffers[r.buffer][r.index];this.buffers[r.buffer][r.index]=n,this.moves.addMove({type:A.MEMCPY,from:e,to:r,value:n,original:t})}},{key:"free",value:function(e){e>0&&(delete this.buffers[e],this.bufferIdPool.free(e),this.moves.addMove({type:A.FREE,buffer:e}))}},{key:"nthBitSet",value:function(e,r){var n=this.normaliseIndex(e),t=Boolean(n.value&1<<r);return this.moves.addMove({type:A.NTH_BIT_SET,index:n,result:t}),t}},{key:"normaliseIndex",value:function(e){"number"===typeof e&&(e={buffer:0,index:e});var r=this.buffers[e.buffer][e.index];return T(T({},e),{},{value:r})}},{key:"values",get:function(){return this.buffers[0]}}]),e}();m((function(e,r,n){var t="sort"===e?I:R;if(!(r in t))throw new Error("sort (".concat(r,") not implemented"));console.log("Worker: Performing ".concat(e,": ").concat(r));var i=new N(n);t[r](i),console.log("Worker: Finished calculating ".concat(e,": ").concat(r));var a=o(i.getMoves(),2),f=a[0],u=a[1];return[M(f,[f]),u,i.values]}))}]);
//# sourceMappingURL=sort.worker.a2347acf.worker.js.map