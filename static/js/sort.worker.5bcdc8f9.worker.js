!function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/sorting-visualiser/",t(t.s=0)}([function(e,r,t){"use strict";function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function o(e,r){if(e){if("string"===typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,r):void 0}}function i(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,o=!1,i=void 0;try{for(var a,f=e[Symbol.iterator]();!(n=(a=f.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(u){o=!0,i=u}finally{try{n||null==f.return||f.return()}finally{if(o)throw i}}return t}}(e,r)||o(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function f(e,r){if(e){if("string"===typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,r):void 0}}function u(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,o=!1,i=void 0;try{for(var a,f=e[Symbol.iterator]();!(n=(a=f.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(u){o=!0,i=u}finally{try{n||null==f.return||f.return()}finally{if(o)throw i}}return t}}(e,r)||f(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(e,r){return(c=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e,r,t){return(v=l()?Reflect.construct:function(e,r,t){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(e,n));return t&&c(o,t.prototype),o}).apply(null,arguments)}function h(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.r(r);var d=Symbol("Comlink.proxy"),b=Symbol("Comlink.endpoint"),p=Symbol("Comlink.releaseProxy"),m=Symbol("Comlink.thrown"),y=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},g=new Map([["proxy",{canHandle:function(e){return y(e)&&e[d]},serialize:function(e){var r=new MessageChannel,t=r.port1,n=r.port2;return w(e,t),[n,[n]]},deserialize:function(e){return e.start(),function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=!1,i=new Proxy(n,{get:function(n,a){if(S(o),a===p)return function(){return k(r,{type:5,path:t.map((function(e){return e.toString()}))}).then((function(){x(r),o=!0}))};if("then"===a){if(0===t.length)return{then:function(){return i}};var f=k(r,{type:0,path:t.map((function(e){return e.toString()}))}).then(P);return f.then.bind(f)}return e(r,[].concat(h(t),[a]))},set:function(e,n,i){S(o);var a=u(E(i),2),f=a[0],s=a[1];return k(r,{type:1,path:[].concat(h(t),[n]).map((function(e){return e.toString()})),value:f},s).then(P)},apply:function(n,i,a){S(o);var f=t[t.length-1];if(f===b)return k(r,{type:4}).then(P);if("bind"===f)return e(r,t.slice(0,-1));var s=u(M(a),2),c=s[0],l=s[1];return k(r,{type:2,path:t.map((function(e){return e.toString()})),argumentList:c},l).then(P)},construct:function(e,n){S(o);var i=u(M(n),2),a=i[0],f=i[1];return k(r,{type:3,path:t.map((function(e){return e.toString()})),argumentList:a},f).then(P)}});return i}(e,[],r);var r}}],["throw",{canHandle:function(e){return y(e)&&m in e},serialize:function(e){var r=e.value;return[r instanceof Error?{isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:{isError:!1,value:r},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function w(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;r.addEventListener("message",(function t(n){if(n&&n.data){var o,i=Object.assign({path:[]},n.data),a=i.id,f=i.type,c=i.path,l=(n.data.argumentList||[]).map(P);try{var d=c.slice(0,-1).reduce((function(e,r){return e[r]}),e),b=c.reduce((function(e,r){return e[r]}),e);switch(f){case 0:o=b;break;case 1:d[c.slice(-1)[0]]=P(n.data.value),o=!0;break;case 2:o=b.apply(d,l);break;case 3:var p;o=A(v(b,h(l)));break;case 4:var y=new MessageChannel,g=y.port1,S=y.port2;w(e,S),o=j(g,[g]);break;case 5:o=void 0}}catch(p){o=s({value:p},m,0)}Promise.resolve(o).catch((function(e){return s({value:e},m,0)})).then((function(e){var n=u(E(e),2),o=n[0],i=n[1];r.postMessage(Object.assign(Object.assign({},o),{id:a}),i),5===f&&(r.removeEventListener("message",t),x(r))}))}})),r.start&&r.start()}function x(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function S(e){if(e)throw new Error("Proxy has been released and is not useable")}function M(e){var r,t=e.map(E);return[t.map((function(e){return e[0]})),(r=t.map((function(e){return e[1]})),Array.prototype.concat.apply([],r))]}var O=new WeakMap;function j(e,r){return O.set(e,r),e}function A(e){return Object.assign(e,s({},d,!0))}function E(e){var r,t=function(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=f(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw i}}}}(g);try{for(t.s();!(r=t.n()).done;){var n=u(r.value,2),o=n[0],i=n[1];if(i.canHandle(e)){var a=u(i.serialize(e),2);return[{type:3,name:o,value:a[0]},a[1]]}}}catch(s){t.e(s)}finally{t.f()}return[{type:0,value:e},O.get(e)||[]]}function P(e){switch(e.type){case 3:return g.get(e.name).deserialize(e.value);case 0:return e.value}}function k(e,r,t){return new Promise((function(n){var o=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function r(t){t.data&&t.data.id&&t.data.id===o&&(e.removeEventListener("message",r),n(t.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},r),t)}))}var U=function(e){var r=e.compare,t=e.swap,n=e.size,o=Math.floor(3*Math.log2(n)/4),i=function(e,t,n){for(;e<t;){var o=e+(t-e>>1);r(o,n)<0?e=o+1:t=o}return e},a=function(e,n,o){for(;;){var i=2*n+1,a=2*n+2,f=n;if(i<o&&r(e+f,e+i)<0&&(f=i),a<o&&r(e+f,e+a)<0&&(f=a),f===n)return;t(e+n,e+f),n=f}};!function e(n,f,u){if(f-n<16)!function(e,r){for(var n=1;n<r-e;n++)for(var o=i(e,e+n,e+n),a=e+n;a>o;a--)t(a,a-1)}(n,f);else if(u>o)!function(e,r){for(var n=r-e,o=n-1;o>=0;o--)a(e,o,n);for(;n>1;)t(e,e+n-1),a(e,0,n-1),n-=1}(n,f);else{var s=function(e,t){var n=Array(3).fill(0).map((function(){return e+Math.floor(Math.random()*(t-e))}));return n.sort((function(e,t){return r(e,t)})),n[1]}(n,f);t(s,n);for(var c=n+1,l=f-1;c<l;){for(;c<l&&r(c,n)<=0;)c+=1;for(;c<l&&r(n,l)<0;)l-=1;t(c,l)}r(n,c)<0&&(c-=1),t(n,c),e(n,c+1,u+1),e(c+1,f,u+1)}}(0,n,1)};var I,z,_=function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.pending=[],this.minGallop=7},C={binaryInsertionSort:function(e){for(var r=e.compare,t=e.swap,n=e.size,o=function(e){for(var t=0,n=e;t<n;){var o=t+Math.floor((n-t)/2);r(e,o)<0?n=o:t=o+1}return t},i=1;i<n;i++)for(var a=o(i),f=i;f>a;f--)t(f,f-1)},bubbleSort:function(e){for(var r=e.swap,t=e.compare,n=e.size,o=0;o<n-1;o++)for(var i=n-1;i>o;i--)t(i,i-1)<0&&r(i,i-1)},heapSort:function(e){for(var r=e.compare,t=e.swap,n=e.size,o=function(e,n){for(var o,i,a;e<n;){if(o=e,a=2*e+2,(i=2*e+1)<n&&r(o,i)<0&&(o=i),a<n&&r(o,a)<0&&(o=a),o===e)return;t(e,o),e=o}},i=0;i<n;i++)o(n-i-1,n);for(var a=0;a<n;a++)t(0,n-a-1),o(0,n-a-1)},introsort:U,mergeSort:function(e){var r=e.compare,t=e.malloc,n=e.memcpy,o=e.free,i=e.size;!function e(i,a){var f=i+Math.floor((a-i)/2);i<f&&(e(i,f),e(f,a),function(e,i,a){for(var f=t(a-e),u=0,s=e,c=i;s<i&&c<a;)r(s,c)<0?n(s++,{buffer:f,index:u}):n(c++,{buffer:f,index:u}),u+=1;if(s<i)for(var l=s;l<i;l++)n(l,a-i+l);for(;u--;)n({buffer:f,index:u},e+u);o(f)}(i,f,a))}(0,i)},quickSort:function(e){var r=e.swap,t=e.compare,n=e.size;!function e(n,o){if(n<o){var i=function(e,n){for(var o=e,i=n,a=n;a>o;a--)t(o,a)<0&&r(a,i--);return r(o,i),i}(n,o);e(n,i-1),e(i+1,o)}}(0,n-1)},radixSortLsb:function(e){for(var r=e.nthBitSet,t=e.malloc,n=e.memcpy,o=e.free,i=e.size,a=0;1<<a<=i;a++){for(var f=t(i),u=0,s=i-1,c=0;c<i;c++)r(c,a)?n(c,{buffer:f,index:s--}):n(c,{buffer:f,index:u++});for(var l=0;l<u;l++)n({buffer:f,index:l},l);for(var v=0;v<i-s-1;v++)n({buffer:f,index:i-v-1},u+v);o(f)}},radixSortMsb:function(e){for(var r=e.nthBitSet,t=e.swap,n=e.size,o=[0],i=[n],a=[Math.floor(Math.log2(n))];o.length>0;){for(var f=o.pop(),u=i.pop(),s=a.pop(),c=f,l=u;c<l;){for(;c<l&&!r(c,s);)c+=1;for(;c<l&&r(l-1,s);)l-=1;c<l&&t(c,l-1)}f+1<c&&s>0&&(o.push(f),i.push(c),a.push(s-1)),c+1<u&&s>0&&(o.push(c),i.push(u),a.push(s-1))}},shellSort:function(e){for(var r=e.compare,t=e.swap,n=e.size,o=~~(n/2);o>0;){for(var i=o;i<n;i++)for(var a=i;a>=o&&r(a-o,a)>0;a-=o)t(a-o,a);o=~~(o/2)}},timsort:function(e){for(var r=e.compare,t=e.swap,n=e.malloc,o=e.memcpy,i=e.free,a=e.size,f=function(e,t){if(e===t-1)return 1;var n=e+1;if(r(e,n)>0){for(;n<t&&r(n-1,n)>0;)n++;return e-n}for(;n<t&&r(n-1,n)<=0;)n++;return n-e},u=function(e,t,n,o,i){var a=i?function(e){return{buffer:i,index:e}}:function(e){return e},f=t+o,u=0,s=1;if(r(a(f),e)<0){for(var c=n-o;s<c&&r(a(f+s),e)<0;)u=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c),u=o+u,s=o+s}else{for(var l=o;s<l&&r(a(f-s),e)>=0;)u=s,(s=1+(s<<1))<=0&&(s=l);s>l&&(s=l);var v=u;u=o-s,s=o-v}for(;u<s;){var h=u+(s-u>>1);r(a(t+h),e)<0?u=h+1:s=h}return s},s=function(e,t,n,o,i){var a=i?function(e){return{buffer:i,index:e}}:function(e){return e},f=t+o,u=0,s=1;if(r(a(f),e)<0){for(var c=n-o;s<c&&r(a(f+s),e)<0;)u=s,(s=1+(s<<1))<=0&&(s=c);s>c&&(s=c),u+=o,s+=o}else{for(var l=o;s<l&&r(a(f-s),e)>=0;)u=s,(s=1+(s<<1))<=0&&(s=l);s>l&&(s=l);var v=u;u=o-s,s=o-v}for(;u<s;){var h=u+(s-u>>1);r(a(t+h),e)<0?u=h+1:s=h}return s},c=function(e,t,n){for(;e<t;){var o=e+Math.floor((t-e)/2);r(n,o)<0?t=o:e=o+1}return e},l=function(e,r){for(var n=r;n>e;n--)t(n-1,n)},v=function(e,r){for(var t=e;t<r;t++)l(c(e,t,t),t)},h=function(e,r){for(var n=Math.floor((r-e)/2),o=0;o<n;o++)t(e+o,r-o-1)},d=function(e,t,a,f,c){for(var l=n(a),v=0;v<a;v++)o(t+v,{buffer:l,index:v});var h=t;t=0;for(var d=0,b=0,p=function(){for(;a>0&&c>0&&(d>=e.minGallop||b>=e.minGallop);){e.minGallop&&(e.minGallop-=1),d=s(f,t,a,0,l);for(var r=0;r<d;r++)o({buffer:l,index:t++},h++);a-=d,b=u({buffer:l,index:t},f,c,0);for(var n=0;n<b;n++)o(f++,h++);c-=b}e.minGallop+=1};a>0&&c>0;)r({buffer:l,index:t},f)<0?(o({buffer:l,index:t++},h++),a-=1,d+=1,b=0):(o(f++,h++),c-=1,d=0,b+=1),d+b>=e.minGallop&&p();for(;a-- >0;)o({buffer:l,index:t++},h++);i(l)},b=function(e,t,a,f,c){for(var l=n(c),v=0;v<c;v++)o(f+v,{buffer:l,index:v});for(var h=f+c,d=0,b=0,p=function(){for(;a>0&&c>0&&(d>=e.minGallop||b>=e.minGallop);){e.minGallop&&(e.minGallop-=1),d=a-s({buffer:l,index:c-1},t,a,a-1);for(var r=0;r<d;r++)o(t+--a,--h);b=c-u(t+a-1,0,c,c-1,l);for(var n=0;n<b;n++)o({buffer:l,index:--c},--h)}e.minGallop+=1};a>0&&c>0;)r({buffer:l,index:c-1},t+a-1)<=0?(o(t+--a,--h),d+=1,b=0):(o({buffer:l,index:--c},--h),d=0,b+=1),d+b>=e.minGallop&&p();for(;c>0;)o({buffer:l,index:--c},--h);i(l)},p=function(e,r){var t=e.pending,n=t[r].base,o=t[r].len,i=t[r+1].base,a=t[r+1].len;t[r].len=o+a,t.splice(r+1,1);var f=s(i,n,o,0);((o-=f)<=(a=u((n+=f)+o-1,i,a,a-1))?d:b)(e,n,o,i,a)},m=function(e){for(var r=e.pending;r.length>1;){var t=r.length-2;if(t>0&&r[t-1].len<=r[t].len+r[t+1].len)r[t-1].len<r[t+1].len&&(t-=1),p(e,t);else{if(!(r[t].len<=r[t+1].len))break;p(e,t)}}},y=new _,g=a,w=0,x=function(e){for(var r=0;e>=16;)r|=1&e,e>>=1;return e+r}(a);g>0;){var S=f(w,a);S<0&&h(w,w+(S*=-1)),S<x&&v(w,w+(S=Math.min(x,g))),y.pending.push({base:w,len:S}),m(y),w+=S,g-=S}!function(e){for(var r=e.pending;r.length>1;){var t=r.length-2;t>0&&r[t-1].len<r[t+1].len&&(t-=1),p(e,t)}}(y)}},T=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=0,n=0;0===t;)t=Math.random();for(;0===n;)n=Math.random();var o=Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*n);return o*r+e},R=function(e,r,t){return Math.max(e,Math.min(t,Math.round(r)))},L={cut:function(e){for(var r=e.malloc,t=e.memcpy,n=e.free,o=e.size,i=R(0,T(o/2,o/6),o),a=r(i),f=0;f<i;f++)t(f,{buffer:a,index:f});for(var u=0;u<o-i;u++)t(i+u,u);for(var s=0;s<i;s++)t({buffer:a,index:s},o-i+s);n(a)},hinduShuffle:function(e){for(var r=e.malloc,t=e.memcpy,n=e.free,o=e.size,i=R(0,T(o/5,o/30),o-1),a=R(0,T((o-i)/2,(o-i)/6),o-i),f=r(i),u=0;u<i;u++)t(a+u,{buffer:f,index:u});for(var s=0;s<a;s++)t(a-s-1,a+i-s-1);for(var c=0;c<i;c++)t({buffer:f,index:c},c);n(f)},overhandShuffle:function(e){for(var r=e.malloc,t=e.memcpy,n=e.free,o=e.size,i=0;i<o;){for(var a=Math.min(o-i,R(0,T(o/7,o/20),o)),f=r(a),u=0;u<a;u++)t(o-a+u,{buffer:f,index:u});for(var s=0;s<o-i-a;s++)t(o-a-s-1,o-s-1);for(var c=0;c<a;c++)t({buffer:f,index:c},i+c);n(f),i+=a}},perfectRiffleShuffle:function(e){for(var r=e.malloc,t=e.memcpy,n=e.free,o=e.size,i=o>>1,a=r(i),f=0;f<i;f++)t(f,{buffer:a,index:f});for(var u=0,s=i,c=0;u<i&&s<o;)t({buffer:a,index:u++},c++),t(s++,c++);n(a)},randomise:function(e){for(var r=e.swap,t=e.size-1;t>0;t--){r(t,Math.floor(Math.random()*(t+1)))}},reverse:function(e){for(var r=e.swap,t=e.size,n=0;n<Math.floor(t/2);n++)r(n,t-n-1)},riffleShuffle:function(e){for(var r=e.malloc,t=e.memcpy,n=e.free,o=e.size,i=R(0,T(o/2,o/10),o),a=r(i),f=0;f<i;f++)t(f,{buffer:a,index:f});for(var u=0,s=i,c=0;u<i&&s<o;)Math.random()>.5?t({buffer:a,index:u++},c++):t(s++,c++);for(;u<i;)t({buffer:a,index:u++},c++);n(a)}};function B(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function G(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?G(Object(t),!0).forEach((function(r){B(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function W(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function N(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,r,t){return r&&N(e.prototype,r),t&&N(e,t),e}!function(e){e[e.SWAP=1]="SWAP",e[e.COMPARE=2]="COMPARE",e[e.MALLOC=3]="MALLOC",e[e.MEMCPY=4]="MEMCPY",e[e.FREE=5]="FREE",e[e.NTH_BIT_SET=6]="NTH_BIT_SET"}(I||(I={})),function(e){e.FORWARD="FORWARD",e.BACKWARD="BACKWARD"}(z||(z={}));var Y,V=function(){function e(){F(this,e),this.buffer=void 0,this.size=void 0,this.size=0,this.buffer=new ArrayBuffer(6656)}return H(e,[{key:"growIfNeeded",value:function(){if(!(26*(this.size+1)<=this.buffer.byteLength)){for(var e=new ArrayBuffer(2*this.buffer.byteLength),r=new DataView(this.buffer),t=new DataView(e),n=0;n<this.buffer.byteLength;n++)t.setUint8(n,r.getUint8(n));this.buffer=e}}},{key:"addMove",value:function(e){this.growIfNeeded(),function(e,r,t){var n=26*t,o=new DataView(r);switch(o.setUint8(n,e.type),e.type){case I.COMPARE:o.setUint32(n+1,e.i.buffer),o.setUint32(n+5,e.i.index),o.setUint32(n+9,e.i.value),o.setUint32(n+13,e.j.buffer),o.setUint32(n+17,e.j.index),o.setUint32(n+21,e.j.value),o.setInt8(n+25,e.result);break;case I.SWAP:o.setUint32(n+1,e.i.buffer),o.setUint32(n+5,e.i.index),o.setUint32(n+9,e.i.value),o.setUint32(n+13,e.j.buffer),o.setUint32(n+17,e.j.index),o.setUint32(n+21,e.j.value);break;case I.MALLOC:o.setUint32(n+1,e.buffer),o.setUint32(n+5,e.size);break;case I.MEMCPY:o.setUint32(n+1,e.from.buffer),o.setUint32(n+5,e.from.index),o.setUint32(n+9,e.to.buffer),o.setUint32(n+13,e.to.index),o.setUint32(n+17,e.value),o.setUint32(n+21,e.original);break;case I.FREE:o.setUint32(n+1,e.buffer);break;case I.NTH_BIT_SET:o.setUint32(n+1,e.index.buffer),o.setUint32(n+5,e.index.index),o.setUint8(n+9,e.result?1:0)}}(e,this.buffer,this.size),this.size+=1}},{key:"length",get:function(){return this.size}}]),e}();Y=Symbol.iterator;var q=function(){function e(){F(this,e),this._next=1,this._inUse=new Set([])}return H(e,[{key:"next",value:function(){var e=this._next++;return this._inUse.add(e),e}},{key:"free",value:function(e){this._inUse.delete(e)}},{key:"inUse",value:function(e){return this._inUse.has(e)}},{key:Y,value:function(){return this._inUse[Symbol.iterator]()}}]),e}(),K=function(){function e(r){F(this,e),this.original=void 0,this.buffers=void 0,this.bufferIdPool=void 0,this.moves=void 0,this.size=void 0,this.original=W(r),this.buffers={0:r},this.bufferIdPool=new q,this.size=r.length,this.moves=new V,this.swap=this.swap.bind(this),this.compare=this.compare.bind(this),this.malloc=this.malloc.bind(this),this.memcpy=this.memcpy.bind(this),this.free=this.free.bind(this),this.nthBitSet=this.nthBitSet.bind(this)}return H(e,[{key:"getMoves",value:function(){return[this.moves.buffer,this.moves.length]}},{key:"swap",value:function(e,r){var t=this.normaliseIndex(e),n=this.normaliseIndex(r),o=this.buffers[t.buffer],i=this.buffers[n.buffer];o[t.index]=n.value,i[n.index]=t.value,this.moves.addMove({type:I.SWAP,i:t,j:n})}},{key:"compare",value:function(e,r){var t=this.normaliseIndex(e),n=this.normaliseIndex(r),o=Math.sign(t.value-n.value);return this.moves.addMove({type:I.COMPARE,i:t,j:n,result:o}),o}},{key:"malloc",value:function(e){var r=this.bufferIdPool.next();return this.buffers[r]=new Array(e),this.moves.addMove({type:I.MALLOC,size:e,buffer:r}),r}},{key:"memcpy",value:function(e,r){e=this.normaliseIndex(e),r=this.normaliseIndex(r);var t=this.buffers[e.buffer][e.index],n=this.buffers[r.buffer][r.index];this.buffers[r.buffer][r.index]=t,this.moves.addMove({type:I.MEMCPY,from:e,to:r,value:t,original:n})}},{key:"free",value:function(e){e>0&&(delete this.buffers[e],this.bufferIdPool.free(e),this.moves.addMove({type:I.FREE,buffer:e}))}},{key:"nthBitSet",value:function(e,r){var t=this.normaliseIndex(e),n=Boolean(t.value&1<<r);return this.moves.addMove({type:I.NTH_BIT_SET,index:t,result:n}),n}},{key:"normaliseIndex",value:function(e){"number"===typeof e&&(e={buffer:0,index:e});var r=this.buffers[e.buffer][e.index];return D(D({},e),{},{value:r})}},{key:"values",get:function(){return this.buffers[0]}}]),e}();w((function(e,r,t){var n="sort"===e?C:L;if(!(r in n))throw new Error("sort (".concat(r,") not implemented"));console.log("Worker: Performing ".concat(e,": ").concat(r));var o=new K(t);n[r](o),console.log("Worker: Finished calculating ".concat(e,": ").concat(r));var a=i(o.getMoves(),2),f=a[0],u=a[1];return[j(f,[f]),u,o.values]}))}]);
//# sourceMappingURL=sort.worker.5bcdc8f9.worker.js.map